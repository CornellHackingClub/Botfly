<!DOCTYPE html>
<html>
{% include 'header.html' %}
{% include 'nav.html' %}
<body>
<!-- Page Content -->
<div class="container">
    <div class="row">
        <div class="col-md-3">
            <ul>
                <form id="upload-file" method="post" enctype="multipart/form-data">
                    <fieldset>
                        <label class="btn btn-primary btn-block btn-file ">
                            Upload File <input name="file" type="file" style="display: none;">
                        </label>
                    </fieldset>
                </form>
            </ul>
            <ul>
                <div class="well">
                    <div class="row">
                        <input type="search" class="search-query form-control search-payload"
                               placeholder="Search payloads..."/>
                    </div>

                    <div class="row payload-desc">
                        <div class="panel-group payloads" id="accordion">
                            <div class="panel panel-default">
                                <div class="panel-heading"><h4 class="panel-title"><a data-toggle="collapse"
                                                                                      data-parent="#accordion"
                                                                                      href="#collapse-password_popup_osx6038">osx/password_popup_osx</a>
                                </h4></div>
                                <div id="collapse-password_popup_osx6038" class="panel-collapse collapse">
                                    <div class="panel-body">
                                        <div class="row">
                                            <ul class="list-unstyled"><h4>Parameters: </h4></ul>
                                            <div><h4>Description: </h4>
                                                <p></p></div>
                                        </div>
                                        <div class="row">
                                            <div class="variable-inputs">
                                                <div class="input-group-sm margin-bottom">
                                                    <input type="text"
                                                           class="form-control"
                                                           placeholder="LHOST">
                                                </div>
                                                <div class="input-group-sm margin-bottom">
                                                    <input type="text" class="form-control" id="basic-url"
                                                           aria-describedby="basic-addon3" placeholder="RHOST">
                                                </div>
                                            </div>
                                            <button type="button" class="btn btn-danger btn-block"
                                                    onlick="launchPayload()">Launch Payload
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </ul>

        </div>
        <!--</form>-->

        <div class="col-md-9">
            <div id="terminal"></div>
        </div>
    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
<script>
    lastOut = []

    terminal = $('#terminal').terminal(function (command, term) {
        //no bot selected
        if ('{{connected}}' == '') {
            terminal.error('No bot selected.');
            return;
        }
        if (command == 'clear') {
            term.clear();
        }

        //send terminal command to server
        socket.emit('send_command', {data: command});
        socket.removeAllListeners('send_command'); //Sloppy, fix this if can. should be outside terminal function ideally
    }, {
        greetings: 'Botfly Terminal',
        height: 800,
        width: 800,
        //update prompt to be name of current user
        prompt: function (callback) {
            callback('{{connected}}> ');
        },
        convertLinks: false,
        tabcompletion: true,
        completion: function (terminal, command, callback) {
            callback(commonCommands.concat(lastOut));
        }
    });


</script>

<script src="{{ url_for('static', filename='js/index.js') }}"></script>

</body>
</html>